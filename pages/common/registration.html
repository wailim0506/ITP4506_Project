<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Legend Motor Limited - Registration</title>
    <link rel="stylesheet" href="../../src/css/common/registration.css">
    <script src="../../src/js/common/jslib/jquery-1.11.1.js"></script>
    <script src="../../src/js/common/registration.js"></script>
    <!-- Google Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script type="text/javascript" language="JavaScript">
        $(document).ready(function () {
            $(".field").has("input[id='SN']").hide();   //Hide the staff number field
            $('.error').hide();


            $("#customer").click(function () {    //For customer option
                $(".field").has("input[id='policy']").show();
                $(".field").has("input[id='SN']").hide();
            });
            $("#vehicleSales").click(function () {     //For vehicle sales option
                $(".field").has("input[id='policy']").hide();
                $(".field").has("input[id='SN']").show();
            });
            $("#insuranceSales").click(function () {     //For insurance sales option
                $(".field").has("input[id='policy']").hide();
                $(".field").has("input[id='SN']").show();
            });

            $("#backBtn").click(function () {        //Back to login page
                window.location.href = "../../index.html";
            });

            $(".typeSelect").change(function (){
                $('.error').hide();
                $('#registrationForm')[0].reset();
            });


            $("#register").click(function () {       //Registration
                $('.error').hide();
                let SN;
                let type = $("input[name='type']:checked").val();
                let hasError = false;

                if ($('#SN').val().trim() === '' && (type === "V" || type === "I")) {
                    $('#SNError').show();
                    hasError = true;
                }

                if ($('#firstName').val().trim() === '' || $('#lastName').val().trim() === '') {
                    $('#usernameError').show();
                    hasError = true;
                }

                if (!$('input[name="gender"]:checked').val()) {
                    $('#genderError').show();
                    hasError = true;
                }

                if ($('#phoneNo').val().trim() === '') {
                    $('#phoneError').show();
                    hasError = true;
                }

                if ($('#pass').val().trim() === '') {
                    $('#passError').show();
                    hasError = true;
                }

                if ($('#pass').val().trim() !== $('#conPass').val().trim()) {
                    $('#confirmPassError').show();
                    hasError = true;
                }

                // Validate email
                const emailPattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;
                if (!emailPattern.test($('#email').val().trim())) {
                    $('#emailError').show();
                    hasError = true;
                }


                if(type === "C") {   //For customer
                    if($('#policy').is(':checked') && !hasError) {
                        alert("Resister successfully \nYour username is: LMC0001");
                    }else if(!$('#policy').is(':checked')) {
                        alert("Please agree to the terms and conditions");
                    }
                }else if(type === "V") {    //For vehicle sales
                    SN = $("#SN").val();
                    if(SN === "LM0001" && !hasError) {
                        alert("Resister successfully \nYour username is: VS0001\nThe system will redirect to the login page.");
                        window.location.href = "../../index.html";
                    }

                }else if(type === "I") {    //For insurance sales
                    SN = $("#SN").val();
                    if(SN === "LM0001" && !hasError) {
                        alert("Resister successfully \nYour username is: IS0001\nThe system will redirect to the login page.");
                        window.location.href = "../../index.html";
                    }
                }
            });
        });
    </script>
</head>
<body>
<div id="body_div">
    <div id="left_side"> <!-- Contain logo-->
        <img id="left_side_logo" src="../../src/img/LMLogo.webp" alt=""/>
    </div>
    <div id="right_side"> <!-- Contain registration form-->
        <div id="form"> <!--Form for registration-->

            <div class="field">
                <label style="font-size: 300%;font-weight: 500; color: #278da3">Registration</label>
            </div>

            <div class="typeSelectCenter">
                <div class="typeSelect">
                    <input type="radio" id="customer" name="type" value="C" checked>
                    <label for="customer">Customer</label>
                    <input type="radio" id="vehicleSales" value="V" name="type">
                    <label for="vehicleSales">Vehicle Sales</label>
                    <input type="radio" id="insuranceSales" value="I" name="type">
                    <label for="insuranceSales">Insurance Sales</label>
                    <span class="slider"></span>
                </div>
            </div>

            <div class="field">
                <label>Staff Number: </label>
                <input class="formInput" type="text" placeholder="Staff Number" id="SN">
                <div class="error" id="SNError">Staff number is required.</div>
            </div>


                <div class="nameDiv">
                    <div class="nameDivInner">
                        <label>First Name:<input class="formInput" id="firstName" placeholder="FirstName"/></label>
                    </div>
                    <div class="nameDivInner">
                        <label>Last Name:<input class="formInput" id="lastName" placeholder="LastName"/></label>
                    </div>
                </div>
                <div class="error" id="usernameError">User name is required.</div>


            <div class="genderBtnDiv">
                    <label id="genderTit">Gender:</label>
                    <label>Male<input class="genderBtn" type="radio" name="gender"></label>
                    <label>Female<input class="genderBtn"  type="radio" name="gender"></label>
            </div>
            <div class="error" id="genderError">Please select a gender.</div>

            <div class="field">
                <label>Email:</label>
                <input class="formInput" type="email" id="email" placeholder="Enter email">
                <div class="error" id="emailError">Email is required.</div>
            </div>
            <div class="field">
                <label>Phone Number:</label>
                <input class="formInput" id="phoneNo" type="number" placeholder="Enter Phone Number">
                <div class="error" id="phoneError">Phone number is required.</div>
            </div>

            <div class="field">
                <label>Password:</label>
                <input class="formInput" type="password" id="pass" placeholder="Enter Password">
                <div class="error" id="passError">Password is required.</div>
            </div>
            <div class="field">
                <label>Confirm Password:</label>
                <input class="formInput" type="password" id="conPass" placeholder="Re-enter the Password">
                <div class="error" id="confirmPassError">Password not match.</div>
            </div>

            <div class="field">
                <label><input type="checkbox" id="policy">I agree to the
                    <a href="policy.html" class="hoverEff" target="_blank">terms and conditions</a>
                </label>
            </div>

            <div class="field">
                <button id="register">Join</button>
            </div>

            <div class="field">
                <button id="backBtn">Back To Login</button>
            </div>


        </div>
    </div>
</div>
<!-- dark mode button -->
<i id="darkModeToggle" class="material-icons"
   style="position:fixed; bottom: 10px; right: 10px; cursor: pointer;">wb_sunny</i>
</body>
</html>